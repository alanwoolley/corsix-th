***************
*** 576,590 ****
  #ifndef CORSIX_TH_USE_DX9_RENDERER
      if(SDL_WasInit(SDL_INIT_VIDEO))
      {
-         char *sTitle, *sIcon;
-         SDL_WM_GetCaption(&sTitle, &sIcon);
-         if(sTitle) sTitle = strdup(sTitle);
          if(sIcon) sIcon = strdup(sIcon);
          SDL_QuitSubSystem(SDL_INIT_VIDEO);
          SDL_InitSubSystem(SDL_INIT_VIDEO);
-         SDL_WM_SetCaption(sTitle, sIcon);
-         if(sTitle) free(sTitle);
          if(sIcon) free(sIcon);
      }
  #endif
  
--- 586,614 ----
  #ifndef CORSIX_TH_USE_DX9_RENDERER
      if(SDL_WasInit(SDL_INIT_VIDEO))
      {
+         
+ #if SDL_VERSION_ATLEAST(2,0,0)
+ 		const char *sTitle = SDL_GetWindowTitle(window);
+ #else
+ 		char *sTitle, *sIcon;
+ 		SDL_WM_GetCaption(&sTitle, &sIcon);
+ 		if(sTitle) sTitle = strdup(sTitle);
          if(sIcon) sIcon = strdup(sIcon);
+ #endif
+ 
          SDL_QuitSubSystem(SDL_INIT_VIDEO);
          SDL_InitSubSystem(SDL_INIT_VIDEO);
+ 
+ #if SDL_VERSION_ATLEAST(2,0,0)
+ 		SDL_SetWindowTitle(window,sTitle);
+ #else
+ 		SDL_WM_SetCaption(sTitle, sIcon);
+ 		if(sTitle) free(sTitle);
          if(sIcon) free(sIcon);
+ #endif
+ 
+         
+        
      }
  #endif
  
